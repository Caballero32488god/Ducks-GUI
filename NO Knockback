local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")

-- Function to prevent knockback
local function onHumanoidDied()
    -- Reset properties when the character dies
    humanoid.PlatformStand = false
end

-- Prevent knockback by adjusting the Humanoid's health
local function onPlayerHit(damage)
    -- If the player takes damage, we can apply our own logic here.
    -- This doesn't prevent damage but stops knockback.
    humanoid.HealthChanged:Connect(function()
        if humanoid.Health < 100 then -- Adjust according to your max health
            humanoid:TakeDamage(damage)
        end
    end)
end

-- Listen for character being hit (assuming a RemoteEvent for damage)
game.ReplicatedStorage.DamageEvent.OnClientEvent:Connect(onPlayerHit)

-- Reset when respawning
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    humanoid.Died:Connect(onHumanoidDied)
end)

-- Reconnect on respawn
humanoid.Died:Connect(onHumanoidDied)
