local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

local Settings = { personal = false }
local connection

local function activateMuscleFeature()
    local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    humanoid:ChangeState(11) -- Change state to jumping
    humanoidRootPart.CFrame = CFrame.new(-8967, 9, -6128) -- Teleport to the specified coordinates

    -- Perform punch actions
    LocalPlayer.muscleEvent:FireServer("punch", "leftHand")
    LocalPlayer.muscleEvent:FireServer("punch", "rightHand")

    -- Equip the Punch tool
    local tool = LocalPlayer.Backpack:FindFirstChild("Punch")
    if tool then
        humanoid:EquipTool(tool)
    end
end

local function toggleMuscleFeature(state)
    Settings.personal = state

    if state then
        connection = RunService.Stepped:Connect(function()
            if Settings.personal then
                activateMuscleFeature()
            end
        end)
    else
        if connection then
            connection:Disconnect() -- Stop the loop when the feature is toggled off
        end
    end
end

-- Chat Command
Players.LocalPlayer.Chatted:Connect(function(message)
    if message:lower() == ";muscle" then
        if Settings.personal then
            toggleMuscleFeature(false)  -- Stop if it's already on
            print("Stopped muscle feature.")
        else
            toggleMuscleFeature(true)  -- Start the muscle feature
            print("Started muscle feature.")
        end
    end
end)
