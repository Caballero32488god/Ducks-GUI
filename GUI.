local player = game.Players.LocalPlayer
local playersListFrame = script.Parent.ScrollingFrame
local toggleButton = script.Parent.TextButton
local dropdownVisible = false

-- Function to update the player list
local function updatePlayerList()
    for _, child in ipairs(playersListFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()  -- Remove previous buttons
        end
    end

    for _, p in ipairs(game.Players:GetPlayers()) do
        local playerButton = Instance.new("TextButton")
        playerButton.Size = UDim2.new(1, 0, 0, 50)  -- Button size
        playerButton.Text = p.Name
        playerButton.Parent = playersListFrame

        -- Button click function
        playerButton.MouseButton1Click:Connect(function()
            print("You selected: " .. p.Name)
        end)
    end
end

-- Toggle the dropdown
toggleButton.MouseButton1Click:Connect(function()
    dropdownVisible = not dropdownVisible
    playersListFrame.Visible = dropdownVisible
end)

-- Update the list initially
updatePlayerList()

-- Listen for player changes
game.Players.PlayerAdded:Connect(updatePlayerList)
game.Players.PlayerRemoving:Connect(updatePlayerList)
