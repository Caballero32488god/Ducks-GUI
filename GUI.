local Players = game:GetService("Players")
local ScreenGui = Instance.new("ScreenGui")
local Dropdown = Instance.new("Frame") -- This will be the dropdown menu
local Button = Instance.new("TextButton") -- Button to execute the teleport
local PlayerList = Instance.new("TextLabel") -- To show the selected player

ScreenGui.Parent = Players.LocalPlayer:WaitForChild("PlayerGui")
Dropdown.Parent = ScreenGui
Dropdown.Size = UDim2.new(0, 200, 0, 100)
Dropdown.Position = UDim2.new(0.5, -100, 0.5, -50)

Button.Parent = Dropdown
Button.Size = UDim2.new(1, 0, 0, 50)
Button.Text = "Select Player to Teleport"

PlayerList.Parent = Dropdown
PlayerList.Size = UDim2.new(1, 0, 0, 50)
PlayerList.Position = UDim2.new(0, 0, 0, 50)
PlayerList.Text = "No Player Selected"

local function updateDropdown()
    local players = Players:GetPlayers()
    local playerNames = {}
    
    for _, player in ipairs(players) do
        if player ~= Players.LocalPlayer then
            table.insert(playerNames, player.Name)
        end
    end

    Button.Text = "Select Player: " .. (playerNames[1] or "None")
    
    -- Create a dropdown for player selection
    local dropdownList = Instance.new("Frame")
    dropdownList.Size = UDim2.new(1, 0, 0, 100)
    dropdownList.Position = UDim2.new(0, 0, 1, 0)
    dropdownList.Parent = Dropdown

    for i, playerName in ipairs(playerNames) do
        local playerButton = Instance.new("TextButton")
        playerButton.Size = UDim2.new(1, 0, 0, 30)
        playerButton.Position = UDim2.new(0, 0, 0, (i - 1) * 30)
        playerButton.Text = playerName
        playerButton.Parent = dropdownList

        playerButton.MouseButton1Click:Connect(function()
            Button.Text = "Select Player: " .. playerName
            PlayerList.Text = "Selected: " .. playerName
            dropdownList.Visible = false
        end)
    end

    Button.MouseButton1Click:Connect(function()
        dropdownList.Visible = not dropdownList.Visible
    end)
end

updateDropdown()

Button.MouseButton1Click:Connect(function()
    local selectedPlayerName = PlayerList.Text:match("Selected: (.+)")
    if selectedPlayerName then
        local targetPlayer = Players:FindFirstChild(selectedPlayerName)
        if targetPlayer and targetPlayer.Character then
            Players.LocalPlayer.Character.HumanoidRootPart.Position = targetPlayer.Character.HumanoidRootPart.Position
        end
    end
end)
